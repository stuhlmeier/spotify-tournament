<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Spotify brackets</title>

    <link rel="stylesheet" href="style/main.css">
    <link rel="stylesheet" href="style/tournament.css">

    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@latest/dist/svg.min.js"></script>
    <script type="module" src="script/generate.js"></script>
    <script type="module" src="script/bracket.js"></script>
    <script type="module" src="script/step1.js"></script>
    <script type="module" src="script/main.js"></script>
</head>
<body>
<!-- Taken from https://tholman.com/github-corners/ -->
<a href="https://github.com/stuhlmeier/spotify-tournament/" class="github-corner" aria-label="View source on GitHub">
    <svg width="80" height="80" viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>
    .github-corner:hover .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }

    @keyframes octocat-wave {
        0%, 100% {
            transform: rotate(0)
        }
        20%, 60% {
            transform: rotate(-25deg)
        }
        40%, 80% {
            transform: rotate(10deg)
        }
    }

    @media (max-width: 500px) {
        .github-corner:hover .octo-arm {
            animation: none
        }

        .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }
    }
</style>

<div id="container">
    <div id="content-container">
        <h1>Spotify bracket</h1>
        <p>Signed in as <span id="username">unknown</span></p>
        <hr>

        <nav id="breadcrumb">
            <ol>
                <li class="selected">Select an album</li>
                <li class="disabled">Listen and rank</li>
                <li class="disabled">Results</li>
            </ol>
        </nav>

        <div id="step-container">
            <div id="loading-container">
                <p>Loading...</p>
            </div>

            <div id="step1" class="hidden">
                <h2>Step 1: select an album or a playlist</h2>

                <div id="step1-objtype-container">
                    <input type="radio" id="objtype1" name="objectType" value="playlist" checked>
                    <label for="objtype1">Playlist</label>

                    <input type="radio" id="objtype2" name="objectType" value="album">
                    <label for="objtype2">Album</label>

                    <!--                    <input type="radio" id="objtype3" name="objectType" value="artist">-->
                    <!--                    <label for="objtype3">Artist</label>-->
                </div>

                <label for="albumid"></label><br>
                <div>
                    <input id="albumid" type="text">
                    <button id="fetch">Fetch</button>
                </div>
                <div id="album-info-container" class="hidden">
                    <h3>Object information</h3>
                    <div id="album-info-flex">
                        <table>
                            <tbody></tbody>
                        </table>
                        <div id="album-image"></div>
                    </div>
                </div>

                <button id="next">Next</button>
            </div>

            <div id="step2" class="hidden">
                <h2>Step 2: listen and rank</h2>
                <p>Selected album: <span id="step2-album-title"></span></p>
                <div id="step2-matchup-container">
                    <div><b>Round <span id="step2-current-round"></span> of <span id="step2-total-rounds"></span></b>
                    </div>

                    <div id="step2-matchup-view">
                        <div id="step2-matchup-status">
                            <h3>Winners</h3>
                            <hr>
                            <ol>
                                <li>A</li>
                            </ol>
                        </div>
                        <div id="step2-matchup-current">
                            <h3>Matchup <span id="step2-current-matchup"></span> of <span
                                    id="step2-total-matchups"></span>
                            </h3>
                            <hr>

                            <div id="step2-matchup-current-contents">
                                <div id="step2-matchup-items">
                                    <div id="step2-item-left" class="fade">
                                        <div class="bg"></div>
                                        <div class="info">
                                            <p id="step2-item-left-title"></p>
                                            <p id="step2-item-left-artists"></p>
                                            <a class="play">Play on Spotify (requires active device)</a>
                                        </div>
                                    </div>
                                    <div class="vs">vs.</div>
                                    <div id="step2-item-right" class="fade">
                                        <div class="bg"></div>
                                        <div class="info">
                                            <p id="step2-item-right-title"></p>
                                            <p id="step2-item-right-artists"></p>
                                            <a class="play">Play on Spotify (requires active device)</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="step2-matchup-footer">
                                <button id="step2-next-round">Next round</button>
                                <button id="step2-next-matchup">Next matchup</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="step3" class="hidden">
                <h2>Step 3: results</h2>
                <h3>Your favorite track:</h3>
                <iframe width="300" height="380" frameborder="0" allowtransparency="true"
                        allow="encrypted-media"></iframe>

                <h3>Your bracket:</h3>
                <div id="step3-container"></div>
            </div>
        </div>
        <hr>
        <footer>
            <p>Â© 2021 <a href="https://stuhlmeier.github.io/">stuhlmeier</a></p>
            <p>Available under the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License</a>.
            </p>
        </footer>
    </div>
    <div id="modal-container" class="visible">
        <div id="login-modal" class="modal">
            <p>Sign in to Spotify:</p>
            <button id="login-button">Sign in</button>
        </div>
    </div>
</div>
</body>
</html>
